from copy import deepcopy

from numpy.ma import array
from shapely.geometry import LineString

from safety_test_generator import TestGenerator
from utils.validity_checks import intersection_check_last, intersection_check_width
from utils.xml_to_bng_files import convert_test
from fuel_consumption_test_generator import FuelConsumptionTestGenerator
from utils.xml_creator import build_all_xml
from utils.plotter import plotter, plot_splined_list, plot_splines_and_width
from utils.utility_functions import convert_points_to_lines, convert_splines_to_lines
import time

if __name__ == '__main__':
    """
    gen = TestGenerator("easy")      # Parameter is optional, you can also call gen.set_difficulty(str)
    gen.set_files_name("test_case")  # This method call is optional
    
    while True:
        for paths in gen.getTest():
            dbe = paths[0]
            dbc = paths[1]
            #convert_test(dbc, dbe)  # Use this function only when DriveBuild doesn't work for you.
            # All your code goes here
            # Be sure to call onTestFinished(sid, vid)
    
    #dbe = "D:\\Bachelorarbeit\\code\\scenario\\intersection.dbe.xml"
    #dbc = "D:\\Bachelorarbeit\\code\\scenario\\intersection.dbc.xml"
    #convert_test(dbc, dbe)
    """

    gen = FuelConsumptionTestGenerator()

    while True:
        start = time.time()
        list = gen.genetic_algorithm()
        end = time.time()
        print(end - start)
    
    """
    list = [{'lanes': [{'control_points': [{'x': 1.0, 'y': 0.0}, {'x': 6.758131922097408, 'y': -4.441987641403274e-05},
                                           {'x': 12.126779262827473, 'y': -0.0003553590113122619},
                                           {'x': 17.125697762225336, 'y': -0.001199336663178884},
                                           {'x': 21.77464316032614, 'y': -0.0028428720904980953},
                                           {'x': 26.093371197165027, 'y': -0.005552484551754093},
                                           {'x': 30.101637612777132, 'y': -0.009594693305431072},
                                           {'x': 33.8191981471976, 'y': -0.015236017610013225},
                                           {'x': 37.26580854046157, 'y': -0.022742976723984763},
                                           {'x': 40.461224532604184, 'y': -0.03238208990582987},
                                           {'x': 43.42520186366059, 'y': -0.04441987641403274},
                                           {'x': 46.17749627366592, 'y': -0.05912285550707757},
                                           {'x': 48.73786350265532, 'y': -0.07675754644344858},
                                           {'x': 51.12605929066393, 'y': -0.09759046848162996},
                                           {'x': 53.36183937772688, 'y': -0.1218881408801058},
                                           {'x': 55.464959503879335, 'y': -0.14991708289736047},
                                           {'x': 57.45517540915642, 'y': -0.1819438137918781},
                                           {'x': 59.35224283359328, 'y': -0.2182348528221429},
                                           {'x': 61.17591751722504, 'y': -0.259056719246639},
                                           {'x': 62.94595520008687, 'y': -0.30467593232385054},
                                           {'x': 64.68211162221388, 'y': -0.35535901131226194},
                                           {'x': 66.40414252364126, 'y': -0.41137247547035727},
                                           {'x': 68.13180364440407, 'y': -0.47298284405662055},
                                           {'x': 69.88485072453754, 'y': -0.5404566363295362},
                                           {'x': 71.68303950407676, 'y': -0.6140603715475886},
                                           {'x': 73.54600233451127, 'y': -0.6940568673128937},
                                           {'x': 75.485968254595, 'y': -0.7804868418454981},
                                           {'x': 77.50369116834146, 'y': -0.8730467593232388},
                                           {'x': 79.59893787139951, 'y': -0.9714034706730102},
                                           {'x': 81.771475159418, 'y': -1.0752238268217085},
                                           {'x': 84.02106982804571, 'y': -1.1841746786962273},
                                           {'x': 86.34748867293152, 'y': -1.2979228772234617},
                                           {'x': 88.75049848972421, 'y': -1.4161352733303065},
                                           {'x': 91.22986607407262, 'y': -1.538478717943656},
                                           {'x': 93.78535822162557, 'y': -1.6646200619904055},
                                           {'x': 96.41674172803191, 'y': -1.7942261563974498},
                                           {'x': 99.12378338894045, 'y': -1.9269638520916832},
                                           {'x': 101.90625, 'y': -2.0625},
                                           {'x': 104.76390835685942, 'y': -2.2005014510492966},
                                           {'x': 107.6965252551675, 'y': -2.340635056166466},
                                           {'x': 110.70386749057315, 'y': -2.482567666278405},
                                           {'x': 113.78570185872505, 'y': -2.625966132312005},
                                           {'x': 116.94179515527216, 'y': -2.770497305194165},
                                           {'x': 120.17191417586324, 'y': -2.915828035851776},
                                           {'x': 123.47582571614711, 'y': -3.0616251752117343},
                                           {'x': 126.85329657177266, 'y': -3.207555574200936},
                                           {'x': 130.30409353838863, 'y': -3.3532860837462737},
                                           {'x': 133.82798341164394, 'y': -3.4984835547746433},
                                           {'x': 137.42473298718733, 'y': -3.6428148382129395},
                                           {'x': 141.0941090606677, 'y': -3.785946784988057},
                                           {'x': 144.8365737925404, 'y': -3.927587794100391},
                                           {'x': 148.6606729591375, 'y': -4.067929260904789},
                                           {'x': 152.58016757284045, 'y': -4.2074741913073614},
                                           {'x': 156.60890556663153, 'y': -4.3467307847234},
                                           {'x': 160.76073487349305, 'y': -4.486207240568202},
                                           {'x': 165.0495034264072, 'y': -4.62641175825706},
                                           {'x': 169.4890591583564, 'y': -4.767852537205271},
                                           {'x': 174.0932500023229, 'y': -4.911037776828131},
                                           {'x': 178.87592389128886, 'y': -5.056475676540931},
                                           {'x': 183.8509287582368, 'y': -5.204674435758971},
                                           {'x': 189.03211253614873, 'y': -5.356142253897541},
                                           {'x': 194.43332315800714, 'y': -5.5113873303719405},
                                           {'x': 200.06840855679417, 'y': -5.6709178645974605},
                                           {'x': 205.95121666549224, 'y': -5.835242055989399},
                                           {'x': 212.0955954170835, 'y': -6.004868103963048},
                                           {'x': 218.5153927445503, 'y': -6.1803042079337045},
                                           {'x': 225.224456580875, 'y': -6.362058567316666},
                                           {'x': 232.23663485903973, 'y': -6.550639381527223},
                                           {'x': 239.5657755120269, 'y': -6.746554849980672},
                                           {'x': 247.22572647281868, 'y': -6.950313172092309},
                                           {'x': 255.2303356743975, 'y': -7.162422547277429},
                                           {'x': 263.5934510497455, 'y': -7.383391174951325},
                                           {'x': 272.32892053184514, 'y': -7.613727254529295},
                                           {'x': 281.4505920536784, 'y': -7.85393898542663},
                                           {'x': 290.9723135482278, 'y': -8.104534567058627}], 'width': 8,
                        'left_lanes': 1, 'right_lanes': 1}, {
                           'control_points': [{'x': 285.44791030969895, 'y': -218.03185763115636},
                                              {'x': 285.59721850533487, 'y': -212.35814619699156},
                                              {'x': 285.74652670097083, 'y': -206.68443476282675},
                                              {'x': 285.8958348966067, 'y': -201.01072332866195},
                                              {'x': 286.0451430922426, 'y': -195.33701189449715},
                                              {'x': 286.19445128787856, 'y': -189.66330046033235},
                                              {'x': 286.3437594835144, 'y': -183.98958902616755},
                                              {'x': 286.4930676791504, 'y': -178.31587759200272},
                                              {'x': 286.64237587478624, 'y': -172.64216615783792},
                                              {'x': 286.7916840704222, 'y': -166.96845472367312},
                                              {'x': 286.9409922660581, 'y': -161.29474328950832},
                                              {'x': 287.090300461694, 'y': -155.62103185534352},
                                              {'x': 287.23960865732994, 'y': -149.94732042117872},
                                              {'x': 287.38891685296585, 'y': -144.27360898701392},
                                              {'x': 287.53822504860176, 'y': -138.5998975528491},
                                              {'x': 287.68753324423767, 'y': -132.9261861186843},
                                              {'x': 287.8368414398736, 'y': -127.2524746845195},
                                              {'x': 287.9861496355095, 'y': -121.5787632503547},
                                              {'x': 288.13545783114546, 'y': -115.9050518161899},
                                              {'x': 288.2847660267813, 'y': -110.23134038202508},
                                              {'x': 288.4340742224173, 'y': -104.55762894786028},
                                              {'x': 288.5833824180532, 'y': -98.8839175136955},
                                              {'x': 288.7326906136891, 'y': -93.21020607953065},
                                              {'x': 288.881998809325, 'y': -87.53649464536588},
                                              {'x': 289.0313070049609, 'y': -81.86278321120108},
                                              {'x': 289.18061520059683, 'y': -76.18907177703628},
                                              {'x': 289.32992339623274, 'y': -70.51536034287147},
                                              {'x': 289.47923159186865, 'y': -64.84164890870666},
                                              {'x': 289.62853978750456, 'y': -59.16793747454186},
                                              {'x': 289.77784798314053, 'y': -53.49422604037706},
                                              {'x': 289.9271561787764, 'y': -47.82051460621223},
                                              {'x': 290.07646437441235, 'y': -42.14680317204743},
                                              {'x': 290.2257725700482, 'y': -36.47309173788264},
                                              {'x': 290.3750807656842, 'y': -30.799380303717854},
                                              {'x': 290.5243889613201, 'y': -25.12566886955304},
                                              {'x': 290.673697156956, 'y': -19.451957435388223},
                                              {'x': 290.8230053525919, 'y': -13.778246001223437},
                                              {'x': 290.9723135482278, 'y': -8.104534567058636},
                                              {'x': 291.1216217438638, 'y': -2.4308231328938064},
                                              {'x': 291.27092993949964, 'y': 3.2428883012709946},
                                              {'x': 291.4202381351356, 'y': 8.916599735435781},
                                              {'x': 291.56954633077146, 'y': 14.590311169600582},
                                              {'x': 291.7188545264074, 'y': 20.26402260376537},
                                              {'x': 291.8681627220433, 'y': 25.937734037930213},
                                              {'x': 292.01747091767925, 'y': 31.611445472095014},
                                              {'x': 292.1667791133151, 'y': 37.285156906259786},
                                              {'x': 292.31608730895107, 'y': 42.95886834042463},
                                              {'x': 292.465395504587, 'y': 48.632579774589416},
                                              {'x': 292.6147037002229, 'y': 54.30629120875422},
                                              {'x': 292.7640118958588, 'y': 59.980002642919004},
                                              {'x': 292.9133200914947, 'y': 65.6537140770838},
                                              {'x': 293.0626282871306, 'y': 71.32742551124865},
                                              {'x': 293.21193648276653, 'y': 77.00113694541342},
                                              {'x': 293.36124467840244, 'y': 82.67484837957821},
                                              {'x': 293.51055287403835, 'y': 88.34855981374307},
                                              {'x': 293.65986106967426, 'y': 94.02227124790785},
                                              {'x': 293.80916926531023, 'y': 99.69598268207264},
                                              {'x': 293.95847746094614, 'y': 105.36969411623744},
                                              {'x': 294.10778565658205, 'y': 111.04340555040224},
                                              {'x': 294.25709385221796, 'y': 116.71711698456706},
                                              {'x': 294.4064020478539, 'y': 122.39082841873184},
                                              {'x': 294.5557102434898, 'y': 128.06453985289664},
                                              {'x': 294.7050184391257, 'y': 133.7382512870615},
                                              {'x': 294.8543266347616, 'y': 139.4119627212263},
                                              {'x': 295.0036348303975, 'y': 145.08567415539108},
                                              {'x': 295.1529430260335, 'y': 150.75938558955585},
                                              {'x': 295.30225122166934, 'y': 156.43309702372065},
                                              {'x': 295.4515594173053, 'y': 162.1068084578855},
                                              {'x': 295.6008676129412, 'y': 167.78051989205028},
                                              {'x': 295.75017580857707, 'y': 173.45423132621508},
                                              {'x': 295.89948400421304, 'y': 179.1279427603799},
                                              {'x': 296.0487921998489, 'y': 184.8016541945447},
                                              {'x': 296.19810039548486, 'y': 190.47536562870948},
                                              {'x': 296.34740859112077, 'y': 196.14907706287428},
                                              {'x': 296.4967167867567, 'y': 201.82278849703908}], 'width': 8,
                           'left_lanes': 1, 'right_lanes': 1}, {
                           'control_points': [{'x': 290.9723135482278, 'y': -8.104534567058627},
                                              {'x': 291.9179321205886, 'y': -8.12941926633128},
                                              {'x': 292.86355069294945, 'y': -8.154303965603932},
                                              {'x': 293.8091692653102, 'y': -8.179188664876584},
                                              {'x': 294.754787837671, 'y': -8.204073364149238},
                                              {'x': 295.70040641003186, 'y': -8.22895806342189},
                                              {'x': 296.64602498239265, 'y': -8.253842762694543},
                                              {'x': 297.59164355475343, 'y': -8.278727461967195},
                                              {'x': 298.5372621271142, 'y': -8.303612161239847},
                                              {'x': 299.482880699475, 'y': -8.328496860512502},
                                              {'x': 300.42849927183585, 'y': -8.353381559785154},
                                              {'x': 301.37411784419663, 'y': -8.378266259057806},
                                              {'x': 302.3197364165574, 'y': -8.403150958330459},
                                              {'x': 303.2653549889182, 'y': -8.428035657603111},
                                              {'x': 304.21097356127905, 'y': -8.452920356875763},
                                              {'x': 305.15659213363983, 'y': -8.477805056148416},
                                              {'x': 306.1022107060006, 'y': -8.50268975542107},
                                              {'x': 307.04782927836146, 'y': -8.527574454693722},
                                              {'x': 307.99344785072225, 'y': -8.552459153966375},
                                              {'x': 308.93906642308303, 'y': -8.577343853239027},
                                              {'x': 309.8846849954438, 'y': -8.60222855251168},
                                              {'x': 310.83030356780466, 'y': -8.627113251784332},
                                              {'x': 311.7759221401654, 'y': -8.651997951056984},
                                              {'x': 312.72154071252623, 'y': -8.676882650329638},
                                              {'x': 313.667159284887, 'y': -8.70176734960229},
                                              {'x': 314.6127778572478, 'y': -8.726652048874943},
                                              {'x': 315.55839642960865, 'y': -8.751536748147597},
                                              {'x': 316.50401500196944, 'y': -8.776421447420248},
                                              {'x': 317.4496335743303, 'y': -8.801306146692902},
                                              {'x': 318.395252146691, 'y': -8.826190845965554},
                                              {'x': 319.34087071905185, 'y': -8.851075545238206},
                                              {'x': 320.28648929141264, 'y': -8.875960244510859},
                                              {'x': 321.2321078637734, 'y': -8.900844943783511},
                                              {'x': 322.1777264361342, 'y': -8.925729643056163},
                                              {'x': 323.12334500849505, 'y': -8.950614342328818},
                                              {'x': 324.06896358085584, 'y': -8.97549904160147},
                                              {'x': 325.0145821532166, 'y': -9.00038374087412},
                                              {'x': 325.96020072557747, 'y': -9.025268440146775},
                                              {'x': 326.90581929793825, 'y': -9.050153139419427},
                                              {'x': 327.85143787029904, 'y': -9.07503783869208},
                                              {'x': 328.7970564426598, 'y': -9.099922537964733},
                                              {'x': 329.7426750150206, 'y': -9.124807237237386},
                                              {'x': 330.68829358738145, 'y': -9.149691936510038},
                                              {'x': 331.63391215974224, 'y': -9.17457663578269},
                                              {'x': 332.5795307321031, 'y': -9.199461335055343},
                                              {'x': 333.52514930446387, 'y': -9.224346034327995},
                                              {'x': 334.47076787682465, 'y': -9.249230733600648},
                                              {'x': 335.41638644918544, 'y': -9.274115432873302},
                                              {'x': 336.3620050215462, 'y': -9.299000132145954},
                                              {'x': 337.307623593907, 'y': -9.323884831418606},
                                              {'x': 338.25324216626785, 'y': -9.348769530691259},
                                              {'x': 339.19886073862864, 'y': -9.373654229963911},
                                              {'x': 340.1444793109894, 'y': -9.398538929236565},
                                              {'x': 341.09009788335027, 'y': -9.423423628509216},
                                              {'x': 342.03571645571105, 'y': -9.44830832778187},
                                              {'x': 342.98133502807184, 'y': -9.473193027054522},
                                              {'x': 343.9269536004327, 'y': -9.498077726327175},
                                              {'x': 344.8725721727934, 'y': -9.522962425599827},
                                              {'x': 345.8181907451542, 'y': -9.547847124872481},
                                              {'x': 346.76380931751504, 'y': -9.572731824145132},
                                              {'x': 347.7094278898759, 'y': -9.597616523417786},
                                              {'x': 348.65504646223667, 'y': -9.622501222690438},
                                              {'x': 349.60066503459745, 'y': -9.64738592196309},
                                              {'x': 350.54628360695824, 'y': -9.672270621235745},
                                              {'x': 351.491902179319, 'y': -9.697155320508397},
                                              {'x': 352.4375207516798, 'y': -9.722040019781048},
                                              {'x': 353.38313932404066, 'y': -9.7469247190537},
                                              {'x': 354.32875789640144, 'y': -9.771809418326354},
                                              {'x': 355.2743764687623, 'y': -9.796694117599007},
                                              {'x': 356.21999504112307, 'y': -9.821578816871659},
                                              {'x': 357.16561361348386, 'y': -9.846463516144313},
                                              {'x': 358.11123218584464, 'y': -9.871348215416964},
                                              {'x': 359.0568507582054, 'y': -9.896232914689616},
                                              {'x': 360.00246933056627, 'y': -9.92111761396227},
                                              {'x': 360.94808790292706, 'y': -9.946002313234922}], 'width': 8,
                           'left_lanes': 1, 'right_lanes': 1}], 'type': 'urban', 'file_name': 'urban', 'score': 0,
             'obstacles': None,
             'success_point': {'x': 360.94808790292706, 'y': -9.946002313234922, 'type': 'intersection'},
             'ego_lanes': [0, 2], 'participants': [
            {'id': 'ego', 'init_state': {'x': 1.0, 'y': 0.0, 'orientation': 0, 'movementMode': '_BEAMNG', 'speed': 50},
             'waypoints': [{'x': 1.0, 'y': 0.0, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 6.758131922097408, 'y': -4.441987641403274e-05, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 12.126779262827473, 'y': -0.0003553590113122619, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 17.125697762225336, 'y': -0.001199336663178884, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 21.77464316032614, 'y': -0.0028428720904980953, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 26.093371197165027, 'y': -0.005552484551754093, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 30.101637612777132, 'y': -0.009594693305431072, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 33.8191981471976, 'y': -0.015236017610013225, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 37.26580854046157, 'y': -0.022742976723984763, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 40.461224532604184, 'y': -0.03238208990582987, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 43.42520186366059, 'y': -0.04441987641403274, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 46.17749627366592, 'y': -0.05912285550707757, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 48.73786350265532, 'y': -0.07675754644344858, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 51.12605929066393, 'y': -0.09759046848162996, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 53.36183937772688, 'y': -0.1218881408801058, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 55.464959503879335, 'y': -0.14991708289736047, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 57.45517540915642, 'y': -0.1819438137918781, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 59.35224283359328, 'y': -0.2182348528221429, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 61.17591751722504, 'y': -0.259056719246639, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 62.94595520008687, 'y': -0.30467593232385054, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 64.68211162221388, 'y': -0.35535901131226194, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 66.40414252364126, 'y': -0.41137247547035727, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 68.13180364440407, 'y': -0.47298284405662055, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 69.88485072453754, 'y': -0.5404566363295362, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 71.68303950407676, 'y': -0.6140603715475886, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 73.54600233451127, 'y': -0.6940568673128937, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 75.485968254595, 'y': -0.7804868418454981, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 77.50369116834146, 'y': -0.8730467593232388, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 79.59893787139951, 'y': -0.9714034706730102, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 81.771475159418, 'y': -1.0752238268217085, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 84.02106982804571, 'y': -1.1841746786962273, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 86.34748867293152, 'y': -1.2979228772234617, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 88.75049848972421, 'y': -1.4161352733303065, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 91.22986607407262, 'y': -1.538478717943656, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 93.78535822162557, 'y': -1.6646200619904055, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 96.41674172803191, 'y': -1.7942261563974498, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 99.12378338894045, 'y': -1.9269638520916832, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 101.90625, 'y': -2.0625, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 104.76390835685942, 'y': -2.2005014510492966, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 107.6965252551675, 'y': -2.340635056166466, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 110.70386749057315, 'y': -2.482567666278405, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 113.78570185872505, 'y': -2.625966132312005, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 116.94179515527216, 'y': -2.770497305194165, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 120.17191417586324, 'y': -2.915828035851776, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 123.47582571614711, 'y': -3.0616251752117343, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 126.85329657177266, 'y': -3.207555574200936, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 130.30409353838863, 'y': -3.3532860837462737, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 133.82798341164394, 'y': -3.4984835547746433, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 137.42473298718733, 'y': -3.6428148382129395, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 141.0941090606677, 'y': -3.785946784988057, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 144.8365737925404, 'y': -3.927587794100391, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 148.6606729591375, 'y': -4.067929260904789, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 152.58016757284045, 'y': -4.2074741913073614, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 156.60890556663153, 'y': -4.3467307847234, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 160.76073487349305, 'y': -4.486207240568202, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 165.0495034264072, 'y': -4.62641175825706, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 169.4890591583564, 'y': -4.767852537205271, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 174.0932500023229, 'y': -4.911037776828131, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 178.87592389128886, 'y': -5.056475676540931, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 183.8509287582368, 'y': -5.204674435758971, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 189.03211253614873, 'y': -5.356142253897541, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 194.43332315800714, 'y': -5.5113873303719405, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 200.06840855679417, 'y': -5.6709178645974605, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 205.95121666549224, 'y': -5.835242055989399, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 212.0955954170835, 'y': -6.004868103963048, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 218.5153927445503, 'y': -6.1803042079337045, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 225.224456580875, 'y': -6.362058567316666, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 232.23663485903973, 'y': -6.550639381527223, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 239.5657755120269, 'y': -6.746554849980672, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 247.22572647281868, 'y': -6.950313172092309, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 255.2303356743975, 'y': -7.162422547277429, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 263.5934510497455, 'y': -7.383391174951325, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 272.32892053184514, 'y': -7.613727254529295, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 281.4505920536784, 'y': -7.85393898542663, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 290.9723135482278, 'y': -8.104534567058627, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 290.9723135482278, 'y': -8.104534567058627, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 291.9179321205886, 'y': -8.12941926633128, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 292.86355069294945, 'y': -8.154303965603932, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 293.8091692653102, 'y': -8.179188664876584, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 294.754787837671, 'y': -8.204073364149238, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 295.70040641003186, 'y': -8.22895806342189, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 296.64602498239265, 'y': -8.253842762694543, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 297.59164355475343, 'y': -8.278727461967195, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 298.5372621271142, 'y': -8.303612161239847, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 299.482880699475, 'y': -8.328496860512502, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 300.42849927183585, 'y': -8.353381559785154, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 301.37411784419663, 'y': -8.378266259057806, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 302.3197364165574, 'y': -8.403150958330459, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 303.2653549889182, 'y': -8.428035657603111, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 304.21097356127905, 'y': -8.452920356875763, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 305.15659213363983, 'y': -8.477805056148416, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 306.1022107060006, 'y': -8.50268975542107, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 307.04782927836146, 'y': -8.527574454693722, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 307.99344785072225, 'y': -8.552459153966375, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 308.93906642308303, 'y': -8.577343853239027, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 309.8846849954438, 'y': -8.60222855251168, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 310.83030356780466, 'y': -8.627113251784332, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 311.7759221401654, 'y': -8.651997951056984, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 312.72154071252623, 'y': -8.676882650329638, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 313.667159284887, 'y': -8.70176734960229, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 314.6127778572478, 'y': -8.726652048874943, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 315.55839642960865, 'y': -8.751536748147597, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 316.50401500196944, 'y': -8.776421447420248, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 317.4496335743303, 'y': -8.801306146692902, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 318.395252146691, 'y': -8.826190845965554, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 319.34087071905185, 'y': -8.851075545238206, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 320.28648929141264, 'y': -8.875960244510859, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 321.2321078637734, 'y': -8.900844943783511, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 322.1777264361342, 'y': -8.925729643056163, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 323.12334500849505, 'y': -8.950614342328818, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 324.06896358085584, 'y': -8.97549904160147, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 325.0145821532166, 'y': -9.00038374087412, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 325.96020072557747, 'y': -9.025268440146775, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 326.90581929793825, 'y': -9.050153139419427, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 327.85143787029904, 'y': -9.07503783869208, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 328.7970564426598, 'y': -9.099922537964733, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 329.7426750150206, 'y': -9.124807237237386, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 330.68829358738145, 'y': -9.149691936510038, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 331.63391215974224, 'y': -9.17457663578269, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 332.5795307321031, 'y': -9.199461335055343, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 333.52514930446387, 'y': -9.224346034327995, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 334.47076787682465, 'y': -9.249230733600648, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 335.41638644918544, 'y': -9.274115432873302, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 336.3620050215462, 'y': -9.299000132145954, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 337.307623593907, 'y': -9.323884831418606, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 338.25324216626785, 'y': -9.348769530691259, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 339.19886073862864, 'y': -9.373654229963911, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 340.1444793109894, 'y': -9.398538929236565, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 341.09009788335027, 'y': -9.423423628509216, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 342.03571645571105, 'y': -9.44830832778187, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 342.98133502807184, 'y': -9.473193027054522, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 343.9269536004327, 'y': -9.498077726327175, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 344.8725721727934, 'y': -9.522962425599827, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 345.8181907451542, 'y': -9.547847124872481, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 346.76380931751504, 'y': -9.572731824145132, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 347.7094278898759, 'y': -9.597616523417786, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 348.65504646223667, 'y': -9.622501222690438, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 349.60066503459745, 'y': -9.64738592196309, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 350.54628360695824, 'y': -9.672270621235745, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 351.491902179319, 'y': -9.697155320508397, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 352.4375207516798, 'y': -9.722040019781048, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 353.38313932404066, 'y': -9.7469247190537, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 354.32875789640144, 'y': -9.771809418326354, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 355.2743764687623, 'y': -9.796694117599007, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 356.21999504112307, 'y': -9.821578816871659, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 357.16561361348386, 'y': -9.846463516144313, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 358.11123218584464, 'y': -9.871348215416964, 'tolerance': 2,
                            'movementMode': '_BEAMNG'},
                           {'x': 359.0568507582054, 'y': -9.896232914689616, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 360.00246933056627, 'y': -9.92111761396227, 'tolerance': 2, 'movementMode': '_BEAMNG'},
                           {'x': 360.94808790292706, 'y': -9.946002313234922, 'tolerance': 2,
                            'movementMode': '_BEAMNG'}], 'model': 'ETK800'}]}]

    pop = list
    build_all_xml(pop)
    """